<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 450">
  <defs>
    <linearGradient id="layer1" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#EF4444;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DC2626;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer2" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EA580C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer3" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F59E0B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="layer4" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <filter id="layerShadow">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.25"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="450" fill="#0f172a" rx="12"/>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" fill="white" font-family="system-ui" font-size="20" font-weight="600">Security Isolation Layers</text>

  <!-- Layer 4 - Hardware -->
  <g filter="url(#layerShadow)">
    <rect x="50" y="60" width="700" height="370" rx="12" fill="url(#layer1)"/>
    <text x="80" y="95" fill="white" font-family="system-ui" font-size="16" font-weight="600">Layer 1: Hardware Virtualization (KVM)</text>
    <text x="80" y="115" fill="rgba(255,255,255,0.8)" font-family="system-ui" font-size="11">Separate kernel instance â€¢ Isolated memory â€¢ CPU isolation</text>
  </g>

  <!-- Layer 3 - Firecracker -->
  <g filter="url(#layerShadow)">
    <rect x="80" y="130" width="640" height="280" rx="10" fill="url(#layer2)"/>
    <text x="110" y="160" fill="white" font-family="system-ui" font-size="15" font-weight="600">Layer 2: Firecracker VMM</text>
    <text x="110" y="180" fill="rgba(255,255,255,0.8)" font-family="system-ui" font-size="11">Minimal device model (~50k LoC) â€¢ Seccomp filtering â€¢ No network default</text>
  </g>

  <!-- Layer 2 - Guest OS -->
  <g filter="url(#layerShadow)">
    <rect x="110" y="195" width="580" height="195" rx="8" fill="url(#layer3)"/>
    <text x="140" y="225" fill="white" font-family="system-ui" font-size="14" font-weight="600">Layer 3: Guest OS Isolation</text>
    <text x="140" y="245" fill="rgba(255,255,255,0.8)" font-family="system-ui" font-size="11">Read-write rootfs contained â€¢ No network interfaces â€¢ Ephemeral filesystem</text>
  </g>

  <!-- Layer 1 - Application -->
  <g filter="url(#layerShadow)">
    <rect x="140" y="260" width="520" height="110" rx="6" fill="url(#layer4)"/>
    <text x="170" y="290" fill="white" font-family="system-ui" font-size="13" font-weight="600">Layer 4: Application Sandbox</text>
    <text x="170" y="310" fill="rgba(255,255,255,0.8)" font-family="system-ui" font-size="11">Temp directory per job â€¢ Timeout enforcement â€¢ Resource limits</text>

    <!-- Code execution box -->
    <rect x="170" y="325" width="460" height="35" rx="4" fill="#0F172A"/>
    <text x="400" y="348" text-anchor="middle" fill="white" font-family="monospace" font-size="12">ðŸ”’ Untrusted Code Execution (python/node/go/rust/bash)</text>
  </g>

  <!-- Side info -->
  <rect x="540" y="70" width="190" height="45" rx="4" fill="rgba(0,0,0,0.3)"/>
  <text x="635" y="90" text-anchor="middle" fill="white" font-family="system-ui" font-size="11" font-weight="500">Attack Surface</text>
  <text x="635" y="107" text-anchor="middle" fill="#10B981" font-family="system-ui" font-size="10">Minimal (~50k LoC)</text>

  <rect x="540" y="140" width="190" height="45" rx="4" fill="rgba(0,0,0,0.3)"/>
  <text x="635" y="160" text-anchor="middle" fill="white" font-family="system-ui" font-size="11" font-weight="500">Network Access</text>
  <text x="635" y="177" text-anchor="middle" fill="#EF4444" font-family="system-ui" font-size="10">Disabled by default</text>

  <rect x="540" y="205" width="190" height="45" rx="4" fill="rgba(0,0,0,0.3)"/>
  <text x="635" y="225" text-anchor="middle" fill="white" font-family="system-ui" font-size="11" font-weight="500">VM Lifecycle</text>
  <text x="635" y="242" text-anchor="middle" fill="#3B82F6" font-family="system-ui" font-size="10">Destroyed after execution</text>

  <!-- Legend -->
  <rect x="50" y="410" width="700" height="25" rx="4" fill="#1E293B"/>
  <text x="400" y="427" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="11">Each layer adds defense-in-depth protection against malicious code</text>
</svg>
