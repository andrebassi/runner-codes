<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 320">
  <defs>
    <linearGradient id="runnerGradientL" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stepGradientL" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:1" />
    </linearGradient>
    <filter id="shadowL" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="4" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowL" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="320" fill="#f0fdf4" rx="12"/>

  <!-- Title -->
  <text x="300" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="600" fill="#1e293b" text-anchor="middle">Infra.Operator Guest Execution Flow</text>

  <!-- infra.operator (guest) Container -->
  <rect x="50" y="55" width="500" height="240" rx="10" fill="url(#runnerGradientL)" filter="url(#shadowL)"/>
  <text x="300" y="80" font-family="system-ui, -apple-system, sans-serif" font-size="14" font-weight="600" fill="white" text-anchor="middle">infra.operator guest (inside microVM)</text>

  <!-- Step 1 -->
  <rect x="70" y="95" width="140" height="80" rx="6" fill="url(#stepGradientL)" stroke="#bbf7d0" stroke-width="1"/>
  <circle cx="140" cy="115" r="16" fill="#3b82f6"/>
  <text x="140" y="120" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">1</text>
  <text x="140" y="140" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#334155" text-anchor="middle">Receive job</text>
  <text x="140" y="155" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">lang="{language}"</text>

  <!-- Step 2 -->
  <rect x="230" y="95" width="140" height="80" rx="6" fill="url(#stepGradientL)" stroke="#bbf7d0" stroke-width="1"/>
  <circle cx="300" cy="115" r="16" fill="#10b981"/>
  <text x="300" y="120" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">2</text>
  <text x="300" y="140" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#334155" text-anchor="middle">Write code</text>
  <text x="300" y="155" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">/tmp/job-{id}/script</text>

  <!-- Step 3 -->
  <rect x="390" y="95" width="140" height="80" rx="6" fill="url(#stepGradientL)" stroke="#bbf7d0" stroke-width="1"/>
  <circle cx="460" cy="115" r="16" fill="#f59e0b"/>
  <text x="460" y="120" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">3</text>
  <text x="460" y="140" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#334155" text-anchor="middle">Execute</text>
  <text x="460" y="155" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">{runtime} script</text>

  <!-- Step 4 -->
  <rect x="150" y="195" width="140" height="80" rx="6" fill="url(#stepGradientL)" stroke="#bbf7d0" stroke-width="1"/>
  <circle cx="220" cy="215" r="16" fill="#8b5cf6"/>
  <text x="220" y="220" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">4</text>
  <text x="220" y="240" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#334155" text-anchor="middle">Capture output</text>
  <text x="220" y="255" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">stdout / stderr</text>

  <!-- Step 5 -->
  <rect x="310" y="195" width="140" height="80" rx="6" fill="url(#stepGradientL)" stroke="#bbf7d0" stroke-width="1"/>
  <circle cx="380" cy="215" r="16" fill="#ef4444"/>
  <text x="380" y="220" font-family="system-ui, -apple-system, sans-serif" font-size="12" font-weight="600" fill="white" text-anchor="middle">5</text>
  <text x="380" y="240" font-family="system-ui, -apple-system, sans-serif" font-size="11" font-weight="500" fill="#334155" text-anchor="middle">Return result</text>
  <text x="380" y="255" font-family="system-ui, -apple-system, sans-serif" font-size="9" fill="#64748b" text-anchor="middle">exit_code + output</text>

  <!-- Arrows -->
  <path d="M210 135 L225 135" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowL)"/>
  <path d="M370 135 L385 135" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowL)"/>
  <path d="M460 175 L460 185 L220 185 L220 195" stroke="#94a3b8" stroke-width="2" fill="none"/>
  <path d="M290 235 L305 235" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#arrowL)"/>
</svg>
