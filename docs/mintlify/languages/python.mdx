---
title: 'Python'
description: 'Python 3.12 code execution'
---

## Overview

Python is one of the most commonly used languages for LLM-generated code. LLM-Firecracker provides Python 3.12 with the complete standard library.

<Card title="Python 3.12" icon="python">
  Includes the complete Python standard library. pip available for package management.
</Card>

## Specifications

| Property | Value |
|----------|-------|
| Docker Image | `python:3.12-alpine` |
| Version | Python 3.12.12 |
| Rootfs Size | 150 MB |
| Execution | Interpreted |
| File Extension | `.py` |
| Run Command | `python3 {file}` |
| Execution Time | ~35ms |

## Infrastructure

```bash
# 1. Create Rootfs from Docker
sudo infra.operator rootfs from-docker --name python --image python:3.12-alpine --size 150

# 2. Create Snapshot
sudo infra.operator snapshot create --lang python --mem 512 --vcpus 1

# 3. Upload to S3
sudo infra.operator rootfs upload --lang python --bucket llm-firecracker
sudo infra.operator snapshot upload --lang python --bucket llm-firecracker

# 4. Test Execution
sudo infra.operator host --lang python --code "import sys; print(sys.version)" --mem 512 --vcpus 1 --snapshot

# Output:
# {
#   "status": "success",
#   "stdout": "3.12.12 (main, Oct  9 2025, 22:34:32) [GCC 14.2.0]\n",
#   "executionTime": "~35ms"
# }
```

## Execution Flow

<Frame>
  <img src="/images/language-execution-flow.svg" alt="Python Execution Flow" />
</Frame>

## Examples

### Hello World

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "print('Hello from Python!')"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Hello from Python!\n",
  "stderr": null,
  "exception": null,
  "executionTime": 45
}
```
</CodeGroup>

### Variables and Calculations

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "x = 10\ny = 20\nprint(f'Sum: {x + y}')\nprint(f'Product: {x * y}')"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Sum: 30\nProduct: 200\n",
  "stderr": null,
  "exception": null,
  "executionTime": 42
}
```
</CodeGroup>

### With STDIN Input

<CodeGroup>
```json Request
{
  "language": "python",
  "stdin": "Alice",
  "files": [
    {
      "name": "main.py",
      "content": "import sys\nname = sys.stdin.readline().strip()\nprint(f'Hello, {name}!')"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Hello, Alice!\n",
  "stderr": null,
  "exception": null,
  "executionTime": 38
}
```
</CodeGroup>

### Batch Execution

Execute the same code with multiple inputs:

<CodeGroup>
```json Request
{
  "language": "python",
  "stdin": ["Alice", "Bob", "Charlie"],
  "files": [
    {
      "name": "main.py",
      "content": "import sys\nname = sys.stdin.readline().strip()\nprint(f'Hello, {name}!')"
    }
  ]
}
```

```json Response
[
  {
    "status": "success",
    "stdout": "Hello, Alice!\n",
    "stderr": null,
    "exception": null,
    "executionTime": 35,
    "stdin": "Alice"
  },
  {
    "status": "success",
    "stdout": "Hello, Bob!\n",
    "stderr": null,
    "exception": null,
    "executionTime": 32,
    "stdin": "Bob"
  },
  {
    "status": "success",
    "stdout": "Hello, Charlie!\n",
    "stderr": null,
    "exception": null,
    "executionTime": 31,
    "stdin": "Charlie"
  }
]
```
</CodeGroup>

### Functions

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "def fibonacci(n):\n    if n <= 1:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\nfor i in range(10):\n    print(f'F({i}) = {fibonacci(i)}')"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "F(0) = 0\nF(1) = 1\nF(2) = 1\nF(3) = 2\nF(4) = 3\nF(5) = 5\nF(6) = 8\nF(7) = 13\nF(8) = 21\nF(9) = 34\n",
  "stderr": null,
  "exception": null,
  "executionTime": 55
}
```
</CodeGroup>

### Classes

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "class Calculator:\n    def __init__(self):\n        self.result = 0\n    \n    def add(self, x):\n        self.result += x\n        return self\n    \n    def multiply(self, x):\n        self.result *= x\n        return self\n\ncalc = Calculator()\ncalc.add(5).multiply(3).add(10)\nprint(f'Result: {calc.result}')"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Result: 25\n",
  "stderr": null,
  "exception": null,
  "executionTime": 40
}
```
</CodeGroup>

### JSON Processing

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "import json\n\ndata = {'users': [{'name': 'Alice'}, {'name': 'Bob'}]}\njson_str = json.dumps(data, indent=2)\nprint(json_str)\n\nparsed = json.loads(json_str)\nfor user in parsed['users']:\n    print(f\"User: {user['name']}\")"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "{\n  \"users\": [\n    {\n      \"name\": \"Alice\"\n    },\n    {\n      \"name\": \"Bob\"\n    }\n  ]\n}\nUser: Alice\nUser: Bob\n",
  "stderr": null,
  "exception": null,
  "executionTime": 48
}
```
</CodeGroup>

### File Operations (within sandbox)

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "# Write file\nwith open('/tmp/test.txt', 'w') as f:\n    f.write('Hello, File!\\n')\n    f.write('Line 2\\n')\n\n# Read file\nwith open('/tmp/test.txt', 'r') as f:\n    content = f.read()\n    print(content)"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Hello, File!\nLine 2\n",
  "stderr": null,
  "exception": null,
  "executionTime": 52
}
```
</CodeGroup>

## Available Standard Library Modules

The following standard library modules are available:

| Category | Modules |
|----------|---------|
| Data Types | `json`, `datetime`, `collections`, `itertools`, `functools` |
| Text | `re`, `string`, `textwrap` |
| Math | `math`, `random`, `statistics`, `decimal`, `fractions` |
| File/IO | `os`, `sys`, `io`, `pathlib`, `tempfile` |
| Algorithms | `hashlib`, `base64`, `binascii` |
| Utilities | `copy`, `pprint`, `typing`, `dataclasses` |

<Note>
  Network modules (`urllib`, `http`, etc.) are available but won't work since the VM has no network access.
</Note>

### Multi-File Project

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "from utils import greet\nfrom math_ops import add, multiply\n\nprint(greet('World'))\nprint(f'2 + 3 = {add(2, 3)}')\nprint(f'4 * 5 = {multiply(4, 5)}')"
    },
    {
      "name": "utils.py",
      "content": "def greet(name):\n    return f'Hello, {name}!'"
    },
    {
      "name": "math_ops.py",
      "content": "def add(a, b):\n    return a + b\n\ndef multiply(a, b):\n    return a * b"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "Hello, World!\n2 + 3 = 5\n4 * 5 = 20\n",
  "stderr": null,
  "exception": null,
  "executionTime": 65
}
```
</CodeGroup>

## Error Examples

### Syntax Error

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "print('Hello'\n"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "",
  "stderr": "  File \"/tmp/job-xxx/main.py\", line 1\n    print('Hello'\n                 ^\nSyntaxError: unexpected EOF while parsing\n",
  "exception": null,
  "executionTime": 35
}
```
</CodeGroup>

### Runtime Error

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "my_list = [1, 2, 3]\nprint(my_list[10])"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "",
  "stderr": "Traceback (most recent call last):\n  File \"/tmp/job-xxx/main.py\", line 2, in <module>\n    print(my_list[10])\nIndexError: list index out of range\n",
  "exception": null,
  "executionTime": 40
}
```
</CodeGroup>

### Timeout Error

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "import time\nwhile True:\n    time.sleep(1)"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "",
  "stderr": null,
  "exception": "Timeout",
  "executionTime": 30000
}
```
</CodeGroup>

### Import Error

<CodeGroup>
```json Request
{
  "language": "python",
  "files": [
    {
      "name": "main.py",
      "content": "import numpy\nprint(numpy.array([1, 2, 3]))"
    }
  ]
}
```

```json Response
{
  "status": "success",
  "stdout": "",
  "stderr": "Traceback (most recent call last):\n  File \"/tmp/job-xxx/main.py\", line 1, in <module>\n    import numpy\nModuleNotFoundError: No module named 'numpy'\n",
  "exception": null,
  "executionTime": 38
}
```
</CodeGroup>

### Unsupported Language

<CodeGroup>
```json Request
{
  "language": "unknownlang",
  "files": [
    {
      "name": "main.xyz",
      "content": "print hello"
    }
  ]
}
```

```json Response
{
  "status": "failed",
  "error": "E006: unsupported language unknownlang"
}
```
</CodeGroup>

## Performance

| Operation | Time |
|-----------|------|
| Hello World | ~50ms |
| Fibonacci(30) | ~300ms |
| JSON parse/dump (1KB) | ~5ms |
| List operations (10k items) | ~10ms |

## Limitations

<Warning>
  The Python environment has the following limitations:
</Warning>

1. **No pip install**: External packages must be pre-installed in rootfs
2. **No network**: Network operations will fail
3. **Memory limit**: 512 MiB default
4. **Timeout**: Configurable, default 10 seconds
5. **No persistence**: Files are lost after execution

## Adding Packages to Rootfs

To add Python packages to the rootfs:

```bash
# Mount the rootfs
sudo mount -o loop /srv/firecracker/images/rootfs-python.ext4 /mnt/rootfs

# Setup for chroot
sudo cp /etc/resolv.conf /mnt/rootfs/etc/
sudo mount --bind /dev /mnt/rootfs/dev
sudo mount --bind /proc /mnt/rootfs/proc
sudo mount --bind /sys /mnt/rootfs/sys

# Enter chroot and install packages
sudo chroot /mnt/rootfs /bin/bash
pip3 install numpy pandas requests
exit

# Cleanup
sudo umount /mnt/rootfs/sys
sudo umount /mnt/rootfs/proc
sudo umount /mnt/rootfs/dev
sudo umount /mnt/rootfs

# Upload updated image
task s3:upload-single LANG=python
```

## Best Practices

<AccordionGroup>
  <Accordion title="Keep code self-contained">
    Write code that doesn't depend on external packages. Use only standard library modules.
  </Accordion>

  <Accordion title="Handle errors gracefully">
    Use try/except blocks to provide meaningful error messages.
  </Accordion>

  <Accordion title="Use print for output">
    All output must go to stdout/stderr. There's no other way to return data.
  </Accordion>

  <Accordion title="Avoid infinite loops">
    Always have termination conditions. Long-running code will be killed by timeout.
  </Accordion>
</AccordionGroup>
