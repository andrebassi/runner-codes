<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 320">
  <defs>
    <linearGradient id="hostGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="vmGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F97316;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EA580C;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="guestGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="320" fill="#0f172a" rx="12"/>

  <!-- infra.operator (host) -->
  <g filter="url(#shadow)">
    <rect x="40" y="80" width="200" height="160" rx="12" fill="url(#hostGrad)"/>
    <text x="140" y="120" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">infra.operator host</text>
    <text x="140" y="145" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui" font-size="13">Go Binary</text>
    <line x1="60" y1="165" x2="220" y2="165" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="140" y="190" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• Firecracker API</text>
    <text x="140" y="210" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• VM Lifecycle</text>
    <text x="140" y="230" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• Vsock Client</text>
  </g>

  <!-- Arrow 1 -->
  <g>
    <line x1="250" y1="160" x2="330" y2="160" stroke="#64748B" stroke-width="3" stroke-linecap="round"/>
    <polygon points="340,160 325,152 325,168" fill="#64748B"/>
    <text x="290" y="145" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="11">API Socket</text>
  </g>

  <!-- Firecracker VMM Box -->
  <g filter="url(#shadow)">
    <rect x="350" y="80" width="200" height="160" rx="12" fill="url(#vmGrad)"/>
    <text x="450" y="120" text-anchor="middle" fill="white" font-family="system-ui" font-size="18" font-weight="600">Firecracker</text>
    <text x="450" y="145" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui" font-size="13">VMM (Rust)</text>
    <line x1="370" y1="165" x2="530" y2="165" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="450" y="190" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• KVM Backend</text>
    <text x="450" y="210" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• Vsock Bridge</text>
    <text x="450" y="230" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="12">• Minimal Devices</text>
  </g>

  <!-- Arrow 2 -->
  <g>
    <line x1="560" y1="160" x2="640" y2="160" stroke="#64748B" stroke-width="3" stroke-linecap="round"/>
    <polygon points="650,160 635,152 635,168" fill="#64748B"/>
    <text x="600" y="145" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="11">vsock</text>
    <text x="600" y="180" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="10">CID=3</text>
  </g>

  <!-- MicroVM Box -->
  <g filter="url(#shadow)">
    <rect x="660" y="40" width="200" height="240" rx="12" fill="#1E293B" stroke="#334155" stroke-width="2"/>
    <text x="760" y="75" text-anchor="middle" fill="#94A3B8" font-family="system-ui" font-size="14" font-weight="500">Firecracker microVM</text>

    <!-- infra.operator (guest) inside -->
    <rect x="680" y="95" width="160" height="120" rx="8" fill="url(#guestGrad)"/>
    <text x="760" y="130" text-anchor="middle" fill="white" font-family="system-ui" font-size="14" font-weight="600">infra.operator guest</text>
    <text x="760" y="152" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-family="system-ui" font-size="12">Go Binary</text>
    <line x1="695" y1="168" x2="825" y2="168" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
    <text x="760" y="188" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">vsock:5000</text>
    <text x="760" y="205" text-anchor="middle" fill="rgba(255,255,255,0.9)" font-family="system-ui" font-size="11">Code Executor</text>

    <!-- Rootfs label -->
    <text x="760" y="250" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="11">rootfs-{lang}.ext4</text>
  </g>

  <!-- Labels at bottom -->
  <text x="140" y="300" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="11">Host Process</text>
  <text x="450" y="300" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="11">Hypervisor</text>
  <text x="760" y="300" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="11">Isolated VM</text>
</svg>
