<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 320">
  <defs>
    <linearGradient id="createGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="restoreGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10B981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
    </linearGradient>
    <filter id="snapShadow">
      <feDropShadow dx="0" dy="3" stdDeviation="4" flood-opacity="0.25"/>
    </filter>
    <marker id="snapArrow" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto">
      <path d="M0,0 L8,4 L0,8 Z" fill="#94A3B8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="320" fill="#0f172a" rx="12"/>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" fill="white" font-family="system-ui" font-size="16" font-weight="600">Snapshot Workflow</text>

  <!-- Section 1: Create Snapshot (one-time) -->
  <g filter="url(#snapShadow)">
    <rect x="30" y="50" width="740" height="110" rx="10" fill="url(#createGrad)"/>
    <text x="55" y="80" fill="white" font-family="system-ui" font-size="13" font-weight="600">1. Create Snapshot (one-time)</text>
  </g>

  <!-- Boot VM step -->
  <rect x="50" y="95" width="140" height="50" rx="6" fill="#0F172A"/>
  <text x="120" y="118" text-anchor="middle" fill="#3B82F6" font-family="system-ui" font-size="11" font-weight="500">Boot VM</text>
  <text x="120" y="135" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="9">Wait ready</text>

  <!-- Arrow -->
  <path d="M195 120 L220 120" stroke="#94A3B8" stroke-width="2" fill="none" marker-end="url(#snapArrow)"/>

  <!-- Pause VM step -->
  <rect x="230" y="95" width="140" height="50" rx="6" fill="#0F172A"/>
  <text x="300" y="118" text-anchor="middle" fill="#3B82F6" font-family="system-ui" font-size="11" font-weight="500">Pause VM</text>
  <text x="300" y="135" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="9">Freeze state</text>

  <!-- Arrow -->
  <path d="M375 120 L400 120" stroke="#94A3B8" stroke-width="2" fill="none" marker-end="url(#snapArrow)"/>

  <!-- Save state step -->
  <rect x="410" y="95" width="340" height="50" rx="6" fill="#0F172A"/>
  <text x="580" y="115" text-anchor="middle" fill="#3B82F6" font-family="system-ui" font-size="11" font-weight="500">Save State</text>
  <text x="580" y="132" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="9">snapshot.vmstate + snapshot.mem</text>

  <!-- Section 2: Restore Snapshot (every execution) -->
  <g filter="url(#snapShadow)">
    <rect x="30" y="180" width="740" height="120" rx="10" fill="url(#restoreGrad)"/>
    <text x="55" y="210" fill="white" font-family="system-ui" font-size="13" font-weight="600">2. Restore Snapshot (every execution)</text>
  </g>

  <!-- Load snapshot step -->
  <rect x="50" y="230" width="180" height="50" rx="6" fill="#0F172A"/>
  <text x="140" y="253" text-anchor="middle" fill="#10B981" font-family="system-ui" font-size="11" font-weight="500">Load snapshot.vmstate</text>
  <text x="140" y="270" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="9">CPU & device state</text>

  <!-- Arrow -->
  <path d="M235 255 L265 255" stroke="#94A3B8" stroke-width="2" fill="none" marker-end="url(#snapArrow)"/>

  <!-- Load memory step -->
  <rect x="275" y="230" width="180" height="50" rx="6" fill="#0F172A"/>
  <text x="365" y="253" text-anchor="middle" fill="#10B981" font-family="system-ui" font-size="11" font-weight="500">Load snapshot.mem</text>
  <text x="365" y="270" text-anchor="middle" fill="#64748B" font-family="system-ui" font-size="9">Memory contents</text>

  <!-- Arrow -->
  <path d="M460 255 L490 255" stroke="#94A3B8" stroke-width="2" fill="none" marker-end="url(#snapArrow)"/>

  <!-- Resume step -->
  <rect x="500" y="230" width="250" height="50" rx="6" fill="#0F172A"/>
  <text x="625" y="250" text-anchor="middle" fill="#10B981" font-family="system-ui" font-size="11" font-weight="500">Resume VM</text>
  <text x="625" y="267" text-anchor="middle" fill="#F59E0B" font-family="system-ui" font-size="10" font-weight="600">Ready in ~100ms âš¡</text>
</svg>
